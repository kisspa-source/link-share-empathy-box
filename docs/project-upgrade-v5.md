# Project Upgrade v5 - 편의 기능 중심의 개선

## 개요
사용자 편의성을 극대화하기 위한 북마크 업로드 및 관리 기능 개선 프로젝트

## 주요 목표

### 1. 브라우저 북마크 업로드 기능 구현
- 사용자가 크롬, 엣지, 파이어폭스 등 개인 브라우저 북마크를 직접 업로드
- 기존 폴더 구조를 그대로 유지하여 사이트에 반영
- Edge Function을 통한 북마크 이미지 자동 수집

### 2. 사용자 친화적인 업로드 경험 제공
- 직관적이고 편리한 업로드 인터페이스
- 브라우저별 북마크 내보내기 방법 단계별 안내
- 실시간 진행률 표시 및 상태 안내

---

## 📋 작업 단계별 TODO

### Phase 1: 기술 분석 및 파서 구현

#### 🔍 1. 브라우저 북마크 파일 형식 분석 및 파서 구현
**목표**: 각 브라우저의 북마크 파일 형식을 이해하고 파싱 로직 구현

**세부 작업**:
- [ ] 크롬 북마크 파일 형식 분석 (JSON 형태)
- [ ] 파이어폭스 북마크 파일 형식 분석 (JSON 형태)
- [ ] 엣지 북마크 파일 형식 분석 (HTML 형태)
- [ ] 사파리 북마크 파일 형식 분석 (plist 형태)
- [ ] 통합 북마크 파서 인터페이스 설계

**산출물**: 
- `src/lib/parsers/bookmarkParser.ts`
- `src/types/importedBookmark.ts`

#### 🏗️ 2. HTML 형식의 북마크 파일 파싱 로직 구현
**목표**: HTML 표준 북마크 파일을 파싱하여 구조화된 데이터로 변환

**세부 작업**:
- [ ] HTML 북마크 파일 DOM 파싱 로직 구현
- [ ] 북마크 폴더 계층 구조 추출
- [ ] 북마크 메타데이터 추출 (제목, URL, 설명, 태그 등)
- [ ] 파일 유효성 검증 로직
- [ ] 에러 처리 및 예외 상황 대응

**산출물**:
- `src/lib/parsers/htmlBookmarkParser.ts`
- `src/utils/bookmarkValidator.ts`

#### 🗂️ 3. 브라우저 북마크 폴더 구조를 애플리케이션 폴더 구조로 매핑
**목표**: 기존 폴더 구조를 그대로 유지하면서 애플리케이션 구조로 변환

**세부 작업**:
- [ ] 폴더 계층 구조 매핑 알고리즘 구현
- [ ] 중복 폴더명 처리 로직
- [ ] 폴더 아이콘 및 색상 자동 할당
- [ ] 북마크 중복 체크 및 병합 로직
- [ ] 대용량 북마크 처리 최적화

**산출물**:
- `src/lib/mappers/folderStructureMapper.ts`
- `src/utils/duplicateHandler.ts`

### Phase 2: 사용자 인터페이스 구현

#### 🎨 4. 북마크 업로드 UI 컴포넌트 구현
**목표**: 직관적이고 사용하기 쉬운 업로드 인터페이스 제공

**세부 작업**:
- [ ] 드래그 앤 드롭 파일 업로드 컴포넌트
- [ ] 파일 선택 대화상자 구현
- [ ] 업로드 파일 미리보기 기능
- [ ] 파일 형식 검증 및 오류 메시지 표시
- [ ] 모바일 친화적 업로드 UI

**산출물**:
- `src/components/bookmark/BookmarkUploadDialog.tsx`
- `src/components/bookmark/FileDropZone.tsx`

#### 📊 5. 업로드 진행률 표시 및 상태 관리
**목표**: 사용자가 업로드 진행 상황을 명확히 파악할 수 있도록 함

**세부 작업**:
- [ ] 실시간 진행률 표시 컴포넌트
- [ ] 업로드 상태별 UI 상태 관리
- [ ] 취소 및 재시도 기능 구현
- [ ] 성공/실패 결과 요약 표시
- [ ] 로딩 스피너 및 애니메이션 구현

**산출물**:
- `src/components/bookmark/UploadProgress.tsx`
- `src/hooks/useUploadProgress.ts`

### Phase 3: 고급 기능 구현

#### 🌐 6. Edge Function을 통한 북마크 이미지 자동 수집
**목표**: 업로드된 북마크의 이미지를 자동으로 수집하여 시각적 경험 향상

**세부 작업**:
- [ ] Edge Function 엔드포인트 생성
- [ ] 웹사이트 스크린샷 캡처 로직
- [ ] 파비콘 추출 및 저장
- [ ] 이미지 최적화 및 리사이징
- [ ] 이미지 저장소 연동 (Supabase Storage)

**산출물**:
- `supabase/functions/capture-bookmark-image/index.ts`
- `src/lib/imageCapture.ts`

#### 🧭 7. 브라우저별 북마크 다운로드 방법 안내 컴포넌트
**목표**: 사용자가 각 브라우저에서 북마크를 쉽게 내보낼 수 있도록 안내

**세부 작업**:
- [ ] 브라우저별 안내 컴포넌트 구현
- [ ] 스크린샷과 함께하는 단계별 가이드
- [ ] 브라우저 자동 감지 기능
- [ ] 다국어 지원 가능한 안내 텍스트
- [ ] 동영상 가이드 임베드

**산출물**:
- `src/components/guide/BrowserGuide.tsx`
- `src/components/guide/StepByStepGuide.tsx`

#### 🧙‍♂️ 8. 단계별 업로드 위저드 UI 구현
**목표**: 초보자도 쉽게 따라할 수 있는 단계별 업로드 과정 제공

**세부 작업**:
- [ ] 멀티 스텝 위저드 컴포넌트 구조
- [ ] 각 단계별 유효성 검증
- [ ] 이전/다음 단계 네비게이션
- [ ] 진행률 표시 및 현재 위치 안내
- [ ] 각 단계별 도움말 및 팁 제공

**산출물**:
- `src/components/wizard/BookmarkUploadWizard.tsx`
- `src/components/wizard/WizardStep.tsx`

### Phase 4: 데이터 처리 및 최적화

#### 🔄 9. 중복 북마크 처리 로직 및 사용자 선택 옵션
**목표**: 기존 북마크와 중복되는 항목에 대한 스마트한 처리 방안 제공

**세부 작업**:
- [ ] URL 기반 중복 감지 알고리즘
- [ ] 사용자 선택 옵션 UI (덮어쓰기/건너뛰기/병합)
- [ ] 중복 북마크 미리보기 기능
- [ ] 일괄 처리 옵션 제공
- [ ] 중복 처리 결과 리포트

**산출물**:
- `src/components/bookmark/DuplicateHandler.tsx`
- `src/lib/duplicateDetector.ts`

#### ⚡ 10. 대량 북마크 가져오기 성능 최적화
**목표**: 수천 개의 북마크도 빠르고 안정적으로 처리

**세부 작업**:
- [ ] 배치 처리 로직 구현
- [ ] 메모리 효율적인 스트림 처리
- [ ] 백그라운드 처리 및 진행률 업데이트
- [ ] 에러 복구 및 재시도 메커니즘
- [ ] 성능 모니터링 및 로깅

**산출물**:
- `src/lib/batchProcessor.ts`
- `src/hooks/useBulkImport.ts`

---

## 🎯 완료 기준

### 기능적 요구사항
- [ ] 모든 주요 브라우저의 북마크 파일 지원 (Chrome, Firefox, Edge, Safari)
- [ ] 폴더 구조 완전 보존 (3단계 이상 중첩 폴더 지원)
- [ ] 1000개 이상의 북마크 안정적 처리
- [ ] 중복 북마크 스마트 처리
- [ ] 북마크 이미지 자동 수집 (90% 이상 성공률)

### 사용자 경험 요구사항
- [ ] 5단계 이내의 간단한 업로드 과정
- [ ] 실시간 진행률 표시
- [ ] 직관적인 에러 메시지 및 해결 가이드
- [ ] 모바일 환경에서도 원활한 사용
- [ ] 브라우저별 맞춤형 안내

### 기술적 요구사항
- [ ] 클라이언트 사이드 파일 처리 (보안 강화)
- [ ] 타입 안전성 확보 (TypeScript 100% 적용)
- [ ] 단위 테스트 커버리지 80% 이상
- [ ] 성능 최적화 (대용량 파일 처리)
- [ ] 에러 핸들링 및 복구 메커니즘

---

## 📚 사용자 가이드: 브라우저 북마크 다운로드 방법

### 🌐 Google Chrome
**파일 형식**: HTML 또는 JSON  
**예상 소요 시간**: 1-2분

#### 단계별 가이드
1. **Chrome 브라우저 열기**
   - Chrome을 실행하고 주소창에 `chrome://bookmarks/` 입력
   - 또는 `Ctrl + Shift + O` (Windows) / `Cmd + Option + B` (Mac) 단축키 사용

2. **북마크 관리자 접근**
   - 우측 상단의 점 세 개(⋮) 메뉴 클릭
   - "북마크 관리자" 선택

3. **내보내기 실행**
   - 북마크 관리자 페이지 우측 상단의 점 세 개(⋮) 메뉴 클릭
   - "북마크 내보내기" 선택
   - 파일 저장 위치 선택 (기본: `bookmarks_년월일.html`)

4. **파일 확인**
   - 다운로드 폴더에서 `bookmarks_년월일.html` 파일 확인
   - 파일 크기가 0바이트가 아닌지 확인

**💡 팁**: 
- 북마크가 많을 경우 파일 크기가 클 수 있으니 충분한 저장 공간 확보
- 내보내기 전에 불필요한 북마크 정리 권장

---

### 🦊 Mozilla Firefox
**파일 형식**: HTML  
**예상 소요 시간**: 1-2분

#### 단계별 가이드
1. **Firefox 브라우저 열기**
   - Firefox를 실행하고 주소창에 `about:bookmarks` 입력
   - 또는 `Ctrl + Shift + B` (Windows) / `Cmd + Shift + B` (Mac) 단축키 사용

2. **도서관 창 열기**
   - 상단 메뉴바에서 "북마크" 클릭
   - "모든 북마크 보기" 선택 또는 `Ctrl + Shift + O` 사용

3. **내보내기 실행**
   - 도서관 창 상단의 "가져오기 및 백업" 클릭
   - "HTML로 북마크 내보내기..." 선택
   - 파일 저장 위치 선택 (기본: `bookmarks.html`)

4. **파일 확인**
   - 지정한 위치에서 `bookmarks.html` 파일 확인
   - 메모장이나 텍스트 에디터로 열어서 내용 확인 가능

**💡 팁**: 
- Firefox의 북마크 백업 기능을 정기적으로 사용하면 복원 시 유용
- 동기화 기능을 사용 중이라면 모든 기기의 북마크가 포함됨

---

### 🔷 Microsoft Edge
**파일 형식**: HTML  
**예상 소요 시간**: 1-2분

#### 단계별 가이드
1. **Edge 브라우저 열기**
   - Edge를 실행하고 주소창에 `edge://favorites/` 입력
   - 또는 `Ctrl + Shift + O` (Windows) 단축키 사용

2. **즐겨찾기 관리 페이지 접근**
   - 우측 상단의 점 세 개(⋯) 메뉴 클릭
   - "즐겨찾기" → "즐겨찾기 관리" 선택

3. **내보내기 실행**
   - 즐겨찾기 관리 페이지 상단의 점 세 개(⋯) 메뉴 클릭
   - "즐겨찾기 내보내기" 선택
   - 파일 저장 위치 선택 (기본: `favorites.html`)

4. **파일 확인**
   - 다운로드 폴더에서 `favorites.html` 파일 확인
   - 파일이 제대로 생성되었는지 확인

**💡 팁**: 
- Edge는 Internet Explorer의 즐겨찾기도 함께 내보낼 수 있음
- Microsoft 계정으로 동기화된 즐겨찾기도 모두 포함됨

---

### 🍎 Safari (Mac)
**파일 형식**: HTML  
**예상 소요 시간**: 1-2분

#### 단계별 가이드
1. **Safari 브라우저 열기**
   - macOS에서 Safari 실행
   - 상단 메뉴바에서 "파일" 클릭

2. **북마크 내보내기 시작**
   - "파일" 메뉴에서 "북마크 내보내기..." 선택
   - 또는 `Cmd + Shift + E` 단축키 사용

3. **저장 위치 선택**
   - 파일 저장 대화상자에서 원하는 위치 선택
   - 파일명 설정 (기본: `Safari Bookmarks.html`)
   - "저장" 클릭

4. **파일 확인**
   - 지정한 위치에서 HTML 파일 확인
   - 파일 크기와 내용 확인

**💡 팁**: 
- iCloud 동기화를 사용 중이라면 모든 Apple 기기의 북마크가 포함됨
- Reading List는 별도로 관리되므로 필요시 따로 확인

---

### 🌍 기타 브라우저

#### Opera
1. `opera://bookmarks/` 접근
2. 설정 메뉴에서 "북마크 내보내기" 선택
3. HTML 파일로 저장

#### Brave
1. `brave://bookmarks/` 접근
2. Chrome과 동일한 방식으로 내보내기
3. HTML 파일로 저장

#### Vivaldi
1. 북마크 관리자 접근
2. 파일 메뉴에서 "북마크 내보내기" 선택
3. HTML 파일로 저장

---

## 🔍 북마크 파일 형식 분석

### HTML 북마크 파일 구조
```html
<!DOCTYPE NETSCAPE-Bookmark-file-1>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>Bookmarks</TITLE>
<H1>Bookmarks</H1>
<DL>
  <DT><H3>북마크 툴바</H3>
  <DL>
    <DT><A HREF="https://example.com" ADD_DATE="1234567890">Example Site</A>
    <DT><H3>폴더명</H3>
    <DL>
      <DT><A HREF="https://sub.example.com" ADD_DATE="1234567890">Sub Site</A>
    </DL>
  </DL>
</DL>
```

### 주요 태그 설명
- `<H3>`: 폴더를 나타냄
- `<A>`: 북마크 링크 (HREF 속성에 URL 포함)
- `<DL>`: 목록 컨테이너
- `<DT>`: 목록 항목
- `ADD_DATE`: 북마크 추가 날짜 (Unix timestamp)
- `ICON`: 파비콘 정보 (Base64 인코딩)

---

## 🛠️ 기술 스택 및 도구

### Frontend 기술
- **React**: 컴포넌트 기반 UI 구현
- **TypeScript**: 타입 안전성 확보
- **Tailwind CSS**: 유틸리티 우선 스타일링
- **React Hook Form**: 폼 상태 관리
- **React Dropzone**: 파일 드래그 앤 드롭

### Backend 기술
- **Supabase**: 백엔드 서비스 (PostgreSQL, Storage, Edge Functions)
- **Edge Functions**: 서버리스 함수 (Deno 런타임)
- **Puppeteer**: 웹 스크래핑 및 스크린샷

### 파일 처리 라이브러리
- **DOMParser**: HTML 파싱 (브라우저 내장)
- **FileReader API**: 파일 읽기 (브라우저 내장)
- **fast-xml-parser**: XML/HTML 파싱 최적화
- **papaparse**: CSV 파싱 (필요시)

### UI/UX 라이브러리
- **Framer Motion**: 애니메이션 및 전환
- **React Step Progress Bar**: 진행률 표시
- **Lucide React**: 아이콘 시스템
- **Sonner**: 토스트 알림

---

## 🔧 개발 환경 설정

### 필수 요구사항
- Node.js 18.0.0 이상
- npm 또는 yarn 패키지 매니저
- Git 버전 관리
- 현대적인 브라우저 (Chrome, Firefox, Safari, Edge)

### 추가 도구
- **VS Code**: 개발 환경 (추천)
- **Chrome DevTools**: 디버깅 도구
- **Postman**: API 테스트 도구
- **Figma**: 디자인 시스템 관리

---

## ⚠️ 주의사항 및 문제 해결

### 일반적인 문제점
1. **파일 크기 제한**
   - 대부분의 브라우저에서 북마크 파일 크기는 수 MB 이내
   - 파일이 너무 큰 경우 분할 처리 필요

2. **인코딩 문제**
   - 한글 북마크명이 깨지는 경우 UTF-8 인코딩 확인
   - 특수 문자가 포함된 경우 추가 처리 필요

3. **폴더 구조 손실**
   - 일부 브라우저에서 깊은 폴더 구조가 평면화될 수 있음
   - 중요한 폴더 구조는 미리 확인 권장

### 브라우저별 특이사항
- **Chrome**: 동기화된 북마크만 내보내기됨
- **Firefox**: 태그 정보도 함께 내보내기됨
- **Edge**: Internet Explorer 북마크도 포함 가능
- **Safari**: iCloud 동기화 북마크 포함

### 파일 검증 방법
1. 파일 크기 확인 (0바이트 아님)
2. 텍스트 에디터로 열어서 HTML 구조 확인
3. 주요 북마크 몇 개가 포함되어 있는지 확인

---

## 📋 체크리스트

### 업로드 전 준비사항
- [ ] 브라우저에서 북마크 파일 성공적으로 내보내기 완료
- [ ] 파일 크기 및 내용 확인
- [ ] 중요한 북마크가 모두 포함되어 있는지 확인
- [ ] 폴더 구조가 올바르게 유지되어 있는지 확인

### 개발 완료 기준
- [ ] 모든 주요 브라우저 지원 (Chrome, Firefox, Edge, Safari)
- [ ] 사용자 가이드 컴포넌트 구현 완료
- [ ] 단계별 업로드 위저드 완성
- [ ] 오류 처리 및 사용자 피드백 시스템 구축

---

## 🚀 배포 및 릴리즈 계획

### v5.1.0 - 기본 업로드 기능
- 기본 HTML 북마크 파일 업로드
- 단순 폴더 구조 매핑
- 기본 UI 컴포넌트

### v5.2.0 - 고급 기능 및 최적화
- 모든 브라우저 지원
- 이미지 자동 수집
- 성능 최적화

### v5.3.0 - 사용자 경험 개선
- 위저드 UI 완성
- 브라우저별 가이드
- 고급 중복 처리

이 프로젝트를 통해 사용자들이 기존 북마크를 쉽고 빠르게 마이그레이션할 수 있는 최고의 경험을 제공하고자 합니다.
