# 프로젝트 개선 v4

## 개선 목표
프로젝트의 핵심 기능들의 안정성과 사용자 경험(UX)을 개선하여 더 나은 북마크 관리 서비스를 제공한다.

## 주요 개선 사항

### 1. 북마크 삭제 문제 해결 ⚠️

#### 문제 상황
- 북마크 삭제 요청 시 Supabase 통신은 정상이지만 실제 삭제가 이루어지지 않음
- Database schema table 구조에 문제가 있을 가능성 확인
- API 응답 실패 케이스에 대한 처리가 부족함

#### 해결 방안

**1.1 Database Schema 검증**
- `bookmark` 테이블의 제약조건(constraints) 확인
- Foreign key 관계 검증
- RLS(Row Level Security) 정책 점검
- 삭제 권한 설정 확인

**1.2 API 응답 처리 개선**
- 삭제 요청 후 실패 리턴 값 상세 분석
- 에러 메시지 사용자 친화적으로 개선
- 삭제 성공/실패에 따른 UI 피드백 강화
- 재시도 로직 추가

**1.3 구현 순서**
1. Supabase 콘솔에서 bookmark 테이블 구조 검증
2. 삭제 쿼리 및 RLS 정책 점검
3. 프론트엔드 삭제 함수 에러 핸들링 강화
4. 사용자 피드백 메시지 개선
5. 테스트 케이스 작성 및 검증

---

### 2. 사이드바 북마크 개수 표시 오류 📊

#### 문제 상황
- 폴더별 북마크 개수가 실시간으로 업데이트되지 않음
- 북마크 추가/삭제 시 개수 반영이 지연됨
- 불필요한 API 호출로 인한 성능 저하

#### 해결 방안

**2.1 폴더 조회 시 개수 함께 조회**
- 폴더 목록 API에서 각 폴더의 북마크 개수를 함께 반환
- JOIN 쿼리 또는 서브쿼리를 사용하여 한 번의 요청으로 처리
- 캐싱 전략 도입으로 성능 최적화

**2.2 실시간 개수 업데이트**
- 북마크 추가 시 해당 폴더의 개수 즉시 반영
- 북마크 이동 시 이전/새 폴더 개수 동시 업데이트
- Context API 또는 상태 관리를 통한 일관성 보장

**2.3 UX 개선**
- 개수에 마우스 오버 시 "..." 표시로 변경
- 마우스 아웃 시 원래 개수로 복원
- 로딩 상태 표시로 사용자 경험 향상

**2.4 구현 순서**
1. 폴더 조회 API 수정 (개수 포함)
2. 프론트엔드 상태 관리 개선
3. 실시간 업데이트 로직 구현
4. 마우스 이벤트 핸들링 추가
5. 성능 테스트 및 최적화

---

### 3. 북마크 추가 시 폴더 지정 개선 🎯

#### 문제 상황
- 폴더 선택 후 북마크 추가 시 폴더가 자동 지정되지 않음
- 폴더 선택 UI가 일관성이 없음
- 불필요한 안내 문구와 혼란스러운 버튼명

#### 해결 방안

**3.1 자동 폴더 지정**
- 현재 선택된 폴더를 북마크 추가 다이얼로그에 기본값으로 설정
- URL 파라미터 또는 Context를 통한 현재 폴더 정보 전달
- 사용자가 수동으로 변경 가능하도록 유지

**3.2 폴더 선택 UI 통일**
- 북마크 추가 다이얼로그의 폴더 선택 컴포넌트를 폴더 편집 다이얼로그와 동일하게 구현
- 드롭다운 스타일, 아이콘, 색상 등 일관성 있는 디자인
- 검색 기능 및 계층 구조 표시

**3.3 UI/UX 개선**
- "빠른저장" 안내 문구 제거
- 버튼명 "빠른저장" → "저장"으로 변경
- 직관적이고 간결한 인터페이스 제공

**3.4 구현 순서**
1. 현재 폴더 정보 전달 로직 구현
2. 북마크 추가 다이얼로그 폴더 선택 UI 개선
3. 폴더 편집 다이얼로그와 UI 컴포넌트 통일
4. 불필요한 텍스트 및 버튼명 수정
5. 사용자 테스트 및 피드백 반영

---

## 개발 우선순위

1. **높음**: 북마크 삭제 문제 해결 (핵심 기능 장애)
2. **중간**: 사이드바 개수 표시 오류 (사용자 경험 저해)
3. **낮음**: 북마크 추가 폴더 지정 개선 (편의성 향상)

## 예상 개발 일정

- **1주차**: 북마크 삭제 문제 분석 및 해결
- **2주차**: 사이드바 개수 표시 기능 개선
- **3주차**: 북마크 추가 UI/UX 개선
- **4주차**: 통합 테스트 및 버그 수정

## 성공 지표

- [ ] 북마크 삭제 성공률 100% 달성
- [ ] 폴더별 개수 표시 실시간 업데이트 구현
- [ ] 사용자 만족도 조사에서 개선 사항 긍정 평가 80% 이상
- [ ] API 호출 횟수 20% 이상 감소

## 기술 스택 및 도구

- **Frontend**: React, TypeScript, Tailwind CSS
- **Backend**: Supabase (Database, Auth, Realtime)
- **State Management**: React Context API
- **Testing**: Jest, React Testing Library
- **Version Control**: Git, GitHub

---

*문서 작성일: 2024년*  
*작성자: 개발팀*  
*버전: v4.0*
